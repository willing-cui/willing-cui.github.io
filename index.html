<!DOCTYPE HTML>
<html>

<head>
	<title>Willing's Personal Website</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<meta name="author" content="Willing">
	<meta name="description"
		content="Willing's personal website. It's a simple space to showcase my work, projects, and interests, and to connect with others.">
	<link rel="icon" type="image/png" sizes="192x192" href="./icon_sim_circle_192x192.png">
	<link rel="stylesheet" href="assets/css/main.css" />
	<noscript>
		<link rel="stylesheet" href="assets/css/noscript.css" />
	</noscript>
	<link rel="stylesheet" rel="prefetch" href="assets/css/custom.css" />
	<!-- highlight.js theme, from https://github.com/highlightjs/highlight.js/blob/main/src/styles/ -->
	<link rel="stylesheet" href="assets/css/github-dark.css">
</head>

<body class="is-preload">

	<!-- Wrapper -->
	<div id="wrapper">

		<!-- Header -->
		<header id="header">
			<div class="logo">
				<!-- <span class="icon solid fa-address-card"></span> -->
				<a href="./html/earth.html"><span id="gallery" class="icon solid fa-earth-asia"></span></a>
			</div>
			<div class="content">
				<div class="inner">
					<h1 data-i18n="greeting">Hello~</h1>
					<p data-i18n="welcome_message">Welcome to my little corner of the internet!
						<br> Your visit marks the <span id="busuanzi_value_site_pv"></span>th ripple in this space —
						thank you for stopping by!
					</p>
				</div>
			</div>
			<nav>
				<ul>
					<li><a href="#intro" data-i18n="nav.intro">Intro</a></li>
					<li><a href="#work" id="workButton" data-i18n="nav.work">Works</a></li>
					<li><a href="#skill" id="skillButton" data-i18n="nav.skill">Skills</a></li>
					<li><a href="#blogs_index" data-i18n="nav.blogs">Blogs</a></li>
					<li><a href="#contact" data-i18n="nav.contact">Contact</a></li>
				</ul>
			</nav>
		</header>

		<!-- Main -->
		<div id="main">

			<!-- Intro -->
			<article id="intro">
				<div id="introContent"></div>
			</article>

			<!-- Works -->
			<article style="width: 60rem" id="work">
				<div id="workContent"></div>
			</article>

			<!-- Skills -->
			<article style="width: 45rem" id="skill">
				<div id="skillContent"></div>
			</article>

			<!-- Blogs Index -->
			<article style="width: 80rem" id="blogs_index">
				<div id="blogsIndex"></div>
			</article>

			<!-- Contact -->
			<article id="contact">
				<div id="contactContent"></div>
			</article>

			<!-- Blogs -->
			<article style="width: 60rem" id="blog">
				<div id="blogTemplate"></div>
			</article>

		</div>

		<div class="expand-menu-container" id="menuContainer">
			<!-- 1. The label acts as the clickable "More" button/icon -->
			<!-- Added onclick handler to toggle the menu state --> 
			<div id="menuIcon" class="menu-icon" title="Menu" onclick="toggleMenu()">
				<!-- &#9776;  Hamburger icon -->
				<span id="gallery" class="icon solid fa-list"></span>
			</div>

			<!-- 2. The list that expands -->
			<ul class="expandable-list">
				<li></li>
				<li><a href="javascript:void(0)" onclick="toggleLanguage()" id="language-switch-btn">
					<span class="icon solid fa-language" style="margin: 0px 10px 0px 0px;"></span>
					<span id="language-switch-text">English</span>
				</a></li>
				<li><a href="./html/stickies.html" data-i18n="menu.stickies">Stickies</a></li>
				<li><a href="./html/time.html" data-i18n="menu.time_calculator">Time Calculator</a></li>
			</ul>
		</div>
			
		<script>
			/**
			 * Toggles the 'expanded' class on the main menu container.
			 * This class triggers the CSS transitions for opening/closing the menu.
			 */
			function toggleMenu() {
				const container = document.getElementById('menuContainer');
				if (container) {
					container.classList.toggle('expanded');
				} else {
					console.error("Menu container element not found.");
				}
			}
			
			// 点击菜单项后关闭菜单
			document.addEventListener('DOMContentLoaded', function() {
				const menuItems = document.querySelectorAll('.expandable-list a');
				menuItems.forEach(item => {
					item.addEventListener('click', function() {
						const container = document.getElementById('menuContainer');
						if (container && container.classList.contains('expanded')) {
							container.classList.remove('expanded');
						}
					});
				});
			});
		</script>

		<div id="catalogue">
			<h3 data-i18n="catalogue.title">Catalogue</h3>
			<div class="toc-links"></div>
			<div class="shortcuts">
				<a href="_" class="icon solid fa-circle-arrow-up" title="Back to Top"></a>
				<a href="#blogs_index" class="icon solid fa-circle-plus" title="Blogs"></a>
				<a href="#" class="icon solid fa-circle-xmark" title="Close"></a>
			</div>
		</div>

		<!-- Footer -->
		<footer id="footer">
			<p class="copyright">&copy; 2026 Hongwei CUI (Willing). All Rights Reserved. 版权所有</p>
			<a class="copyright" href="https://beian.miit.gov.cn/" target="_blank">鲁ICP备2025192750号-1</a>
			<img id="filing-icon" src="./images/备案图标.png"/><a class="copyright" href="https://beian.mps.gov.cn/#/query/webSearch?code=37078302000937" rel="noreferrer" target="_blank">鲁公网安备37078302000937号</a>
		</footer>

	</div>

	<!-- BG -->
	<div id="bg"></div>

	<!-- Scripts -->
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/sweetalert2.all.min.js"></script>
	<script src="assets/js/blog_index_generator.js"></script>

	<script>
		$(function () {
			// 根据当前语言加载内容
			const lang = getCurrentLanguage();
			loadContentForLanguage(lang);
			
			// 设置初始语言
			setLanguage(lang);
			
			// 更新语言切换按钮文本
			updateLanguageButtonText(lang);
		})
		
		function loadContentForLanguage(lang) {
			// 尝试加载语言特定的文件，如果不存在则加载默认文件
			const files = ['intro', 'work', 'skill', 'contact'];
			files.forEach(file => {
				const url = `html/${file}_${lang}.html`;
				$.ajax({
					url: url,
					method: 'GET',
					success: function(data) {
						$(`#${file}Content`).html(data);
					},
					error: function() {
						// 如果语言特定文件不存在，加载默认文件
                        console.log("特定语言文件不存在，加载默认文件")
						$(`#${file}Content`).load(`html/${file}.html`);
					}
				});
			});
			
			// 加载博客索引（如果没有语言特定版本，保持原样）
			$('#blogTemplate').load('html/blog.html');
		}
	</script>

	<script src="assets/js/dynamic_background.js"></script>
	<script src="assets/js/submit_message.js"></script>
	<script src="assets/js/blog_submit_message.js"></script>
	<script src="assets/js/browser.min.js"></script>
	<script src="assets/js/breakpoints.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script src="assets/js/main.js"></script>
	<script src="assets/js/typewriter.js"></script>
	<script src="assets/js/dynamic_card.js"></script>
	<script src="assets/js/marked.js"></script>
	<script src="assets/js/highlight.min.js"></script>
	<script>hljs.highlightAll();</script>
	<script src="assets/js/load_markdown.js"></script>

	<script>
		MathJax = {
			tex: {
				inlineMath: [['$', '$'], ["\\(", "\\)"]],
				displayMath: [['$$', '$$'], ["\\(", "\\)"]],
			}
		};
	</script>


	<script>
		const isLocal = (
			window.location.hostname === 'localhost' ||
			window.location.hostname === '127.0.0.1' ||
			window.location.protocol === 'file:' ||         // 本地文件协议
			window.location.port === '3000'              	// 常见开发服务器端口
		);

		console.log("Website is running locally? " + isLocal);

		if (!isLocal) {
			const script = document.createElement('script');
			script.src = 'assets/js/busuanzi.pure.mini.js';
			script.async = true; // 异步加载
			document.head.appendChild(script);
		}
	</script>

	<script type="text/javascript">
		// example: file:///D:/GitHub/willing-cui.github.io/index.html?part=blogs&id=1
		function getParams(key) {
			var reg = new RegExp("(^|&)" + key + "=([^&]*)(&|$)");
			var r = window.location.search.substr(1).match(reg);
			if (r != null) {
				return unescape(r[2]);
			}
			return null;
		};

		if (getParams("part") == 'blogs') {
			window.location.href = "#blog";
			loadMd(null, getParams("id"));
		}
	</script>

	<!-- 语言切换功能脚本 -->
	<script>

		// 语言资源文件
		const translations = {
			en: {
				"greeting": "Hello~",
				"welcome_message": "Welcome to my little corner of the internet! <br>Your visit marks the <span id='busuanzi_value_site_pv'></span>th ripple in this space — thank you for stopping by!",
				"nav.intro": "Intro",
				"nav.work": "Works",
				"nav.skill": "Skills",
				"nav.blogs": "Blogs",
				"nav.contact": "Contact",
				"menu.language_switch": "中文",
				"menu.stickies": "Stickies",
				"menu.time_calculator": "Time Calculator",
				"catalogue.title": "Catalogue",
				"page_title": "Willing's Personal Website"
			},
			zh: {
				"greeting": "您好～",
				"welcome_message": "海内存知己，天涯若比邻。<br>穿过数据洪流，您是第 <span id='busuanzi_value_site_pv'></span> 位在此停泊的旅人。愿这个数字小筑，能成为您思想漫游时的一盏闲灯。",
				"nav.intro": "个人简介",
				"nav.work": "作品项目",
				"nav.skill": "技能特长",
				"nav.blogs": "博客文章",
				"nav.contact": "给我留言",
				"menu.language_switch": "English",
				"menu.stickies": "便利贴",
				"menu.time_calculator": "时间计算器",
				"catalogue.title": "目录",
				"page_title": "Willing 的个人网站"
			}
		};

		// 获取当前语言
		function getCurrentLanguage() {
			const savedLang = localStorage.getItem('preferred-language');
			const browserLang = navigator.language.startsWith('zh') ? 'zh' : 'en';
			return savedLang || browserLang || 'en';
		}

		// 设置语言
		function setLanguage(lang) {
            // 获取访问人数变量
            const visitorNum = document.getElementById('busuanzi_value_site_pv').innerText

			// 更新页面标题
			document.title = translations[lang].page_title;
			
			// 更新所有带 data-i18n 属性的元素
			document.querySelectorAll('[data-i18n]').forEach(element => {
				const key = element.getAttribute('data-i18n');
				if (translations[lang][key]) {
					if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
						element.placeholder = translations[lang][key];
					} else if (element.hasAttribute('title')) {
						element.setAttribute('title', translations[lang][key]);
					} else {
						element.innerHTML = translations[lang][key];
					}
				}
			});

            // 如果元素为空，则填写占位符
            if (visitorNum) {
                document.getElementById('busuanzi_value_site_pv').innerText = visitorNum
            } else {
                document.getElementById('busuanzi_value_site_pv').innerText = "--"
            }
			
			// 重新加载AJAX内容
			loadContentForLanguage(lang);
			
			// 保存语言偏好
			localStorage.setItem('preferred-language', lang);
			
			// 更新语言切换按钮文本
			updateLanguageButtonText(lang);
		}

		// 更新语言切换按钮文本
		function updateLanguageButtonText(lang) {
			const switchText = document.getElementById('language-switch-text');
			if (switchText) {
				// 按钮显示相反的语言名称
				switchText.textContent = lang === 'zh' ? 'English' : '中文';
			}
		}

		// 切换语言, 添加博客重新加载
        function toggleLanguage() {
            const currentLang = getCurrentLanguage();
            const newLang = currentLang === 'zh' ? 'en' : 'zh';
            setLanguage(newLang);
            
            // 触发博客索引重新加载
            if (window.reloadBlogIndexForLanguage) {
                window.reloadBlogIndexForLanguage(newLang);
            }
            
            // 触发自定义事件，供其他组件监听
            window.dispatchEvent(new CustomEvent('languageChange', {
                detail: { language: newLang }
            }));
        }

		// 页面加载时初始化语言按钮
		document.addEventListener('DOMContentLoaded', function() {
			const lang = getCurrentLanguage();
			updateLanguageButtonText(lang);
		});
	</script>

</body>

</html>